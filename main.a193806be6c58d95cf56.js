(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{zUnb:function(t,e,n){"use strict";n.r(e);const i=document.createElement("template");i.innerHTML='\n<style>\n    :host {\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n        height: 100vh;\n        border: 1vh lightgrey outset;\n        background-color: grey;\n    }\n\n    :host[hidden] {\n        display: none;\n    }\n    \n    header, main {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        border: 1vh lightgrey inset;\n        background-color: lightgrey;\n    }\n\n    main {\n        height: 100%;\n    }\n\n    header {\n        padding: 1vh;\n    }\n</style>\n<header>\n    <minesweeper-remaining-mines id="remaining-mines"></minesweeper-remaining-mines>\n    <minesweeper-configuration id="configuration"></minesweeper-configuration>\n    <minesweeper-timer id="timer"></minesweeper-timer>\n</header>\n<main>\n    <minesweeper-board id="board"></minesweeper-board>\n</main>\n';class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(i.content.cloneNode(!0)),this.boardElement=this.shadowRoot.getElementById("board"),this.remainingMinesElement=this.shadowRoot.getElementById("remaining-mines"),this.configurationElement=this.shadowRoot.getElementById("configuration"),this.timerElement=this.shadowRoot.getElementById("timer"),this.boardElement.addEventListener("won",t=>{this.setStateWon()}),this.boardElement.addEventListener("tile-selected",t=>{this.setStateInProgress()}),this.boardElement.addEventListener("lost",t=>{this.setStateLost()}),this.boardElement.addEventListener("flag",t=>{this.remainingMinesElement.decrease()}),this.boardElement.addEventListener("unflag",t=>{this.remainingMinesElement.increase()}),this.boardElement.addEventListener("mousedown",t=>{"in progress"===this.gameState&&this.configurationElement.displaySurprise()}),this.boardElement.addEventListener("mouseup",t=>{"in progress"===this.gameState&&this.configurationElement.displayHappy()}),this.configurationElement.addEventListener("new-game",t=>{this.configuration=t.detail,setTimeout(()=>this.setStateStarted())})}setStateStarted(){this.boardElement.initializeBoard(this.configuration.width,this.configuration.height,this.configuration.mines),this.gameState="started",this.timerElement.reset(),this.configurationElement.displayHappy(),this.remainingMinesElement.reset(this.configuration.mines)}setStateInProgress(){this.gameState="in progress",this.timerElement.isStarted||this.timerElement.start(),this.configurationElement.displayHappy()}setStateWon(){this.gameState="won",this.timerElement.stop(),this.configurationElement.displayWon();const t=this.timerElement.getTime();this.configuration.highScore>t&&this.configurationElement.updateHighScore(t)}setStateLost(){this.gameState="lost",this.timerElement.stop(),this.configurationElement.displayLost()}}customElements.define("minesweeper-game",s);const o=document.createElement("template");o.innerHTML='\n<style>\n    :host {\n        background-color: grey;\n        border: .25rem lightgrey ridge;\n    }\n\n    :host[hidden] {\n        display: none;\n    }\n\n    #board {\n        border-collapse: collapse;\n    }\n</style>\n<table id="board"></table>\n';class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(o.content.cloneNode(!0)),this.board=this.shadowRoot.getElementById("board"),this.board.addEventListener("mouseup",t=>{const e=t.target;"MINESWEEPER-TILE"===e.tagName&&1===t.which&&this.active&&!e.isFlagged&&(this.dispatchEvent(new CustomEvent("tile-selected",{bubbles:!0})),this.revealTiles(e),this.isGameFinished()&&(this.active=!1,this.flagAllMines(),this.dispatchEvent(new CustomEvent("won",{bubbles:!0}))))}),this.board.addEventListener("contextmenu",t=>{const e=t.target;"MINESWEEPER-TILE"===e.tagName&&this.active&&!e.visited&&(e.isFlagged?(e.unflag(),this.dispatchEvent(new CustomEvent("unflag",{bubbles:!0}))):(e.flag(),this.dispatchEvent(new CustomEvent("flag",{bubbles:!0})))),t.preventDefault()})}static get observedAttributes(){return["width","height","mines"]}get mines(){return+this.getAttribute("mines")}set mines(t){this.setAttribute("mines",String(t))}get width(){return+this.getAttribute("width")}set width(t){this.setAttribute("width",String(t))}get height(){return+this.getAttribute("height")}set height(t){this.setAttribute("height",String(t))}connectedCallback(){this.width=+this.getAttribute("width"),this.height=+this.getAttribute("height"),this.mines=+this.getAttribute("mines"),setTimeout(()=>this.initializeBoard(this.width,this.height,this.mines))}attributeChangedCallback(t,e,n){}initializeBoard(t=this.width,e=this.height,n=this.mines){if(this.width=t,this.height=e,this.mines=n,this.active=!0,this.mines>this.width*this.height)return void console.error(`${this.mines} mines is greater than the number of places in a ${this.width} x ${this.height} board`);for(;this.board.firstChild;)this.board.removeChild(this.board.firstChild);this.tiles=[];for(let t=0;t<this.height;t++){const e=document.createElement("tr");for(let n=0;n<this.width;n++){let i=document.createElement("minesweeper-tile");i.setAttribute("x",String(t)),i.setAttribute("y",String(n)),this.tiles[t*this.width+n]=i;const s=document.createElement("td");s.appendChild(i),e.appendChild(s)}this.board.appendChild(e)}let i=0;for(;i<this.mines;){const t=Math.floor(Math.random()*(this.width*this.height));this.tiles[t].isMine||(this.tiles[t].isMine=!0,i++)}}revealTiles(t){let e=[];for(e.push(t);e.length;){let t=e.pop();if(t.visited||t.isFlagged)continue;if(t.isMine)return t.revealMine(!0),this.active=!1,this.revealAllMines(),void this.dispatchEvent(new CustomEvent("lost",{bubbles:!0}));let n=0;this.checkSurroundingTiles(t.x,t.y,(t,e)=>{this.tiles[t*this.width+e].isMine&&n++}),t.revealTileCount(n),0===n&&this.checkSurroundingTiles(t.x,t.y,(t,n)=>{const i=this.tiles[t*this.width+n];i.visited||e.push(i)})}}isGameFinished(){return this.tiles.every(t=>t.isMine||!t.isMine&&t.visited)}revealAllMines(){this.tiles.forEach(t=>{t.isMine&&!t.isFlagged&&t.revealMine(),!t.isMine&&t.isFlagged&&t.revealNotMine(),t.disable()})}flagAllMines(){this.tiles.forEach(t=>{t.isMine&&!t.isFlagged&&(t.flag(),this.dispatchEvent(new CustomEvent("flag",{bubbles:!0})))})}checkSurroundingTiles(t,e,n){t-1>=0&&n(t-1,e),t-1>=0&&e-1>=0&&n(t-1,e-1),t-1>=0&&e+1<this.width&&n(t-1,e+1),e-1>=0&&n(t,e-1),e+1<this.width&&n(t,e+1),t+1<this.height&&n(t+1,e),t+1<this.height&&e-1>=0&&n(t+1,e-1),t+1<this.height&&e+1<this.width&&n(t+1,e+1)}}customElements.define("minesweeper-board",r);const a=document.createElement("template");a.innerHTML="\n<style>\n    :host {\n        box-sizing: border-box;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 1.5rem;\n        width: 1.5rem;\n        font-family: arial;\n        font-weight: 900;\n        border: .25rem outset lightgrey;\n        background-color: lightgrey;\n        cursor: pointer;\n        user-select: none;\n        -moz-user-select: none;\n    }\n\n    :host[hidden] {\n        display: none;\n    }\n\n    :host([pressed]) {\n        border: none;\n    }\n\n    :host([mine]) {\n        background-color: red;\n    }\n\n    :host([visited]) {\n        border: none;\n    }\n\n    :host([value='1']) {\n        color: var(--minesweeper-tile-one-color, blue);\n    }\n\n    :host([value='2']) {\n        color: var(--minesweeper-tile-two-color, green);\n    }\n\n    :host([value='3']) {\n        color: var(--minesweeper-tile-three-color, red);\n    }\n\n    :host([value='4']) {\n        color: var(--minesweeper-tile-four-color, purple);\n    }\n\n    :host([value='5']) {\n        color: var(--minesweeper-tile-five-color, maroon);\n    }\n\n    :host([value='6']) {\n        color: var(--minesweeper-tile-six-color, turquoise);\n    }\n\n    :host([value='7']) {\n        color: var(--minesweeper-tile-seven-color, black);\n    }\n\n    :host([value='8']) {\n        color: var(--minesweeper-tile-eight-color, grey);\n    }\n</style>\n<div id=\"display\"></div>\n";class h extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(a.content.cloneNode(!0)),this.displayElement=this.shadowRoot.getElementById("display"),this.addEventListener("mousedown",t=>{1!==t.buttons||this.isDisabled||this.isFlagged||this.setAttribute("pressed","")}),this.addEventListener("mouseover",t=>{1!==t.buttons||this.isDisabled||this.isFlagged||this.setAttribute("pressed","")}),this.addEventListener("mouseout",t=>{this.removeAttribute("pressed")})}get x(){return+this.getAttribute("x")}set x(t){this.setAttribute("x",String(t))}get y(){return+this.getAttribute("y")}set y(t){this.setAttribute("y",String(t))}get value(){return this.getAttribute("value")}set value(t){this.setAttribute("value",t),this.displayElement.textContent="0"!==this.value?this.value:""}get visited(){return this.hasAttribute("visited")}get isFlagged(){return"üö©"===this.value}connectedCallback(){this.x=+this.getAttribute("x"),this.y=+this.getAttribute("y")}unflag(){this.value=""}flag(){this.value="üö©"}revealNotMine(){this.value="‚ùå",this.setAttribute("visited","")}revealMine(t=!1){t&&this.setAttribute("mine",""),this.value="üí£",this.setAttribute("visited","")}revealTileCount(t){this.value=String(t),this.setAttribute("visited","")}disable(){this.isDisabled=!0}}customElements.define("minesweeper-tile",h);const l=document.createElement("template");l.innerHTML="\n<style>\n    :host {\n        background-color: black;\n        color: red;\n        font-family: 'DSEG7-Classic';\n        font-size: 2rem;\n        user-select: none;\n        -moz-user-select: none;\n    }\n\n    :host[hidden] {\n        display: none;\n    }\n</style>\n<div id=\"display\"></div>\n";class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l.content.cloneNode(!0)),this.displayElement=this.shadowRoot.getElementById("display"),this.timerCount=0}get isStarted(){return!!this.timerCount}disconnectedCallback(){this.stop()}reset(){this.stop(),this.timerCount=0,this.displayElement.textContent=this.getCount()}start(){this.timerInterval||(this.timerInterval=setInterval(()=>{this.timerCount++,this.displayElement.textContent=this.getCount()},1e3))}stop(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=0)}getTime(){return this.timerCount}getCount(){return String(this.timerCount).padStart(3,"0")}}customElements.define("minesweeper-timer",d);const u=document.createElement("template");u.innerHTML="\n<style>\n    :host {\n        background-color: black;\n        color: red;\n        font-family: 'DSEG7-Classic';\n        font-size: 2rem;\n        user-select: none;\n        -moz-user-select: none;\n    }\n\n    :host[hidden] {\n        display: none;\n    }\n</style>\n<div id=\"display\"></div>\n";class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(u.content.cloneNode(!0)),this.displayElement=this.shadowRoot.getElementById("display")}get count(){return+this.getAttribute("count")}set count(t){this.setAttribute("count",String(t))}static get observedAttributes(){return["count"]}attributeChangedCallback(t,e,n){switch(t){case"count":this.displayElement.textContent=this.getCount()}}reset(t){this.count=t}increase(){this.count++}decrease(){this.count--}getCount(){return this.count>=0?String(this.count).padStart(3,"0"):String(this.count).padStart(3,"¬†")}}customElements.define("minesweeper-remaining-mines",c);class m{static getConfigurations(){const t=this.getConfigurationsFromLocalStorage();return t||this.writeConfigurationsToLocalStorage(this.defaultConfigurations),t||this.defaultConfigurations}static getCurrentConfiguration(){return this.defaultConfigurations[0]}static addOrUpdateConfiguration(t){const e=this.getConfigurationsFromLocalStorage()||[],n=e.findIndex(e=>e.id===t.id);-1!==n?e.splice(n,1,t):e.push(t),this.writeConfigurationsToLocalStorage(e)}static getConfigurationsFromLocalStorage(){const t=localStorage.getItem(this.LOCAL_STORAGE_KEY);try{return JSON.parse(t).map(t=>(t.highScore=null===t.highScore?1/0:t.highScore,t))}catch(t){return null}}static writeConfigurationsToLocalStorage(t){localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))}}m.defaultConfigurations=[{id:1,name:"Beginner",width:9,height:9,mines:10,highScore:1/0},{id:2,name:"Intermediate",width:16,height:16,mines:40,highScore:1/0},{id:3,name:"Expert",width:30,height:16,mines:99,highScore:1/0}],m.LOCAL_STORAGE_KEY="minesweeper_configuration";const g=document.createElement("template");g.innerHTML='\n<style>\n    :host {\n        font-size: 1.5rem;\n        user-select: none;\n        -moz-user-select: none;\n    }\n\n    :host[hidden] {\n        display: none;\n    }\n\n    #display:active {\n        border-style: inset;\n    }\n\n    #display {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 1.25rem;\n        height: 2.5rem;\n        width: 2.5rem;\n        border: .25rem lightgrey outset;\n        cursor: pointer;\n    }\n\n    .setup-dropdown {\n        display: none;\n        position: absolute;\n        background-color: lightgrey;\n        border: 1px solid grey;\n        box-shadow: 0 0.5rem 1rem 0 rgba(0, 0, 0, 0.5);\n        cursor: pointer;\n        margin: unset;\n    }\n\n    .setup-dropdown.visible {\n        display: block;\n    }\n\n    .setup-dropdown *:hover {\n        background-color: darkgrey;\n    }\n\n    .setup-dropdown *:active {\n        background-color: grey;\n    }\n\n    .setup-dropdown * {\n        padding: 0.5rem;\n    }\n\n    span {\n        font-size: 50%;\n    }\n</style>\n<button id="display"></button>\n<dl id="setup-dropdown" class="setup-dropdown">\n</dl>\n';class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(g.content.cloneNode(!0)),this.displayElement=this.shadowRoot.getElementById("display"),this.setupDropdownElement=this.shadowRoot.getElementById("setup-dropdown"),this.buildSetupList(),this.shadowRoot.addEventListener("contextmenu",t=>{this.setupDropdownElement.classList.contains("visible")?this.setupDropdownElement.classList.remove("visible"):this.setupDropdownElement.classList.add("visible"),t.preventDefault()}),this.displayElement.addEventListener("click",t=>{this.setupDropdownElement.classList.remove("visible"),this.dispatchEvent(new CustomEvent("new-game",{detail:this.currentConfiguration,bubbles:!0}))}),this.currentConfiguration=m.getCurrentConfiguration(),this.displayHappy()}connectedCallback(){this.dispatchEvent(new CustomEvent("new-game",{detail:this.currentConfiguration,bubbles:!0}))}displayHappy(){this.displayElement.textContent="üòä"}displayLost(){this.displayElement.textContent="‚òπÔ∏è"}displaySurprise(){this.displayElement.textContent="üòÆ"}displayWon(){this.displayElement.textContent="üòé"}updateHighScore(t){this.currentConfiguration.highScore=t,m.addOrUpdateConfiguration(this.currentConfiguration),this.buildSetupList()}buildSetupList(){for(;this.setupDropdownElement.firstChild;)this.setupDropdownElement.removeChild(this.setupDropdownElement.firstChild);for(let t of m.getConfigurations()){const e=document.createElement("dt"),n=document.createElement("span");e.id=String(t.id),e.textContent=t.name,n.textContent=`${t.width} x ${t.height} board with ${t.mines} mines${t.highScore===1/0?"":` (High score: ${t.highScore})`}`,e.appendChild(n),e.addEventListener("click",e=>{this.setupDropdownElement.classList.remove("visible"),this.currentConfiguration=t,this.dispatchEvent(new CustomEvent("new-game",{detail:this.currentConfiguration,bubbles:!0}))}),this.setupDropdownElement.appendChild(e)}}}customElements.define("minesweeper-configuration",p),function(){const t=document.createElement("minesweeper-game");document.body.appendChild(t)}()}},[["zUnb",0]]]);